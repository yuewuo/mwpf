<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hyperion</title>
    <style>
        body {
            margin: 0;
            border: 0;
        }
    </style>
</head>

<body>
    <div style="width: calc(100% - 15px);">
        <div id="hyperion"></div>
    </div>

    <script>
        /* HYPERION_VISUAL_BOOTSTRAP_CODE_BEGIN */
        function hyperion_sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms))
        }
        async function on_hyperion_library_ready(func) {
            // try it every 100ms, until 10s
            for (let i = 0; i < 100; ++i) {
                if (window.hyperion_visual != null) {
                    break
                }
                if (i != 0 && i % 10 == 9) console.log(`window.hyperion_visual not ready, tried ${i} times`)
                await hyperion_sleep(100)
            }
            if (window.hyperion_visual != null) {
                func()
            } else {
                throw new Exception("window.hyperion_visual not found after 10s")
            }
        }
        /* HYPERION_VISUAL_BOOTSTRAP_CODE_END */

        let visualizer_data =
            /* HYPERION_VISUAL_DEBUG_DATA_START */
            { "format": "mwpf", "version": "0.1.1", "positions": [{ "i": -2, "j": -1, "t": 0.0 }, { "i": 2, "j": -1, "t": 0.0 }, { "i": 0, "j": 2, "t": 0.0 }], "snapshots": [["grow 0.5", { "dual_nodes": [{ "d": 0.0, "dd": 1, "dn": 0.0, "e": [], "h": [0], "r": 1.0, "rd": 1, "rn": 1.0, "v": [0] }], "edges": [{ "g": 0.0, "gd": 1, "gn": 0.0, "u": 1.0, "ud": 1, "un": 1.0, "v": [0, 1, 2], "w": 1.0 }], "interface": { "sdd": 1, "sdn": 0.0, "sum_dual": 0.0 }, "vertices": [{ "s": 1 }, { "s": 0 }, { "s": 0 }] }], ["solved", { "dual_nodes": [{ "d": 1.0, "dd": 1, "dn": 1.0, "e": [], "h": [0], "r": 0.0, "rd": 1, "rn": 0.0, "v": [0] }], "edges": [{ "g": 1.0, "gd": 1, "gn": 1.0, "u": 0.0, "ud": 1, "un": 0.0, "v": [0, 1, 2], "w": 1.0 }], "interface": { "sdd": 1, "sdn": 0.0, "sum_dual": 0.0 }, "vertices": [{ "s": 1 }, { "s": 0 }, { "s": 0 }], "subgraph": [0], "weight_range": { "lower": 1.0, "ld": 1, "ln": 1.0, "upper": 1.0, "ud": 1, "un": 1.0, } }]] }
        /* HYPERION_VISUAL_DEBUG_DATA_END */

        function main() {
            const override_config = {
                // show_config: false
                // full_screen: false
            }
            window.hyperion_visual.bind_to_div("#hyperion", visualizer_data, { ...window.hyperion_visual.default_config(), ...override_config })
        }
        window.onload = () => (on_hyperion_library_ready(main))
    </script>

    <!-- load library globally (either in browser page or in Jupyter notebook) -->
    <script type="module" id="hyperion_visual_compressed_js_called">
        /* HYPERION_VISUAL_MODULE_LOADER_BEGIN */
        import { hyperion_visual } from './src/main.ts'
        window.hyperion_visual = hyperion_visual
        /* HYPERION_VISUAL_MODULE_LOADER_END */
    </script>
</body>

</html>